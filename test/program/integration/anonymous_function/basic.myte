module test

import std.test.{assertEqual, assertVecEqual}

fun testDirectUsage() {
  assertEqual((fn (x) -> x + 2)(3), 5);
  assertEqual((fn (x, y) -> (y, x))(7, true)[1], 7);
}

fun testHigherOrderFunction() {
  val x = [1, 2, 3, 4].map(fn (x) -> x == 1 || x == 3);
  assertVecEqual(x, [true, false, true, false]);
}

val global1: (Int) -> Int = fn (x) -> x * 3

val global2: (Int) -> Int = fn (x) -> x * 5

fun testGlobalAnonymousFunction() {
  assertEqual(global1(4), 12);
  assertEqual(global2(4), 20);
}

fun main() {
  testDirectUsage();
  testHigherOrderFunction();
  testGlobalAnonymousFunction();
}