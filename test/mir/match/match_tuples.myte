module test

// No tests generated
fun test1(x: (Int, Bool, String)): Int =
  match (x) {
    | (_, _, _) -> 1
  }

// Test multiple columns
fun test2(x: (Int, Bool, String)): Int =
  match (x) {
    | (1, true, _) -> 1
    | (2, _, _) -> 2
    | (_, true, _) -> 3
    // | (3, false, _) -> 4
    // | (4, _, _) -> 5
    | (_, false, _) -> 6
  }

// Destructure inner values
fun test3(x: (Int, Bool, (Int, Bool))): Int =
  match (x) {
    | (1, _, _) -> 1
    | (_, true, _) -> 2
    | (_, _, (2, _)) -> 3
    | (_, _, (_, false)) -> 4
    | _ -> 5
  }

// Bind inner values
fun test4(x: (Int, Bool, (Int, Bool))): Int =
  match (x) {
    | (1, x, _) -> x ? 1 : 2
    | (_, true, (x, false)) -> x + 3
    | (x, true, (y, _)) -> x + y + 4
    | (_, _, (x, y)) -> y ? x : x + 5
  }

// Extract inner tuple 
fun test5(x: (Int, Bool, (Int, Bool))): (Int, Bool) =
  match (x) {
    | (1, true, x) -> x
    | (_, true, _ as x) -> x
    | (_, _, (1, _) as x) -> x
    | (_, false, x) -> (x[0], x[1])
  }

fun use<T>(x: T) {}

fun main() {
  use(test1);
  use(test2);
  use(test3);
  use(test4);
  use(test5);
}